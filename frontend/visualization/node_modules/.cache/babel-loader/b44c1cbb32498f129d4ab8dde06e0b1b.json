{"ast":null,"code":"var _jsxFileName = \"/Users/deepika/Documents/Visualization_D3_React_JS/Lab2/frontend/visualization/src/components/BiPlot.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport * as d3 from 'd3';\nimport '../css/ScatterPlot.css';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst BiPlot = props => {\n  _s();\n\n  let scatterRef = useRef(null);\n  const [bi, setBiState] = useState();\n  let data = props.data;\n  let width = 1000;\n  let height = 500;\n  const margin_left = 100;\n  const margin_right = 10;\n  const margin_top = 20;\n  const margin_bottom = 70;\n  const effective_width = width - margin_left - margin_right;\n  const effective_height = height - margin_top - margin_bottom;\n  const xVariable = props.chartVariableX;\n  const yVariable = props.chartVariableY;\n  const isXNumeric = props.isXNumeric;\n  const isYNumeric = props.isYNumeric;\n  useEffect(() => {\n    axios.get('http://localhost:5000/bi_plot').then(repos => {\n      const allRepos = repos.data;\n      let vectors = JSON.parse(allRepos['eigen_vectors'][0]);\n      let loadings = JSON.parse(allRepos['feature_coordinates'][0]);\n      let obj = {\n        'eigen_vectors': vectors,\n        'feature_coordinates': loadings\n      };\n      setBiState(obj);\n      clearBoard();\n      draw();\n    });\n  }, [props]);\n  useEffect(() => {\n    clearBoard();\n    draw();\n  }, [bi]);\n\n  const clearBoard = () => {\n    const accessToRef = d3.select(scatterRef.current);\n    accessToRef.selectAll(\"svg > *\").remove();\n  };\n\n  const draw = () => {\n    if (bi != undefined) {\n      let xdataGrouped, ydataGrouped;\n      const accessToRef = d3.select(scatterRef.current).attr(\"height\", height).attr(\"width\", width).style(\"background-color\", \"#f5f5f5\").append(\"g\").attr(\"transform\", \"translate(\" + margin_left + \",\" + margin_top + \")\");\n      let a = bi['eigen_vectors']['PC 1'];\n      let b = [2.111111, 2.13223434, 2.174354353];\n      let mmax = d3.max(Object.keys(a), function (d, i) {\n        return 1;\n      });\n      var xAxis = d3.scaleLinear().domain([-mmax, d3.max(Object.keys(a), function (d, i) {\n        return 1;\n      })]).range([0, effective_width]);\n      accessToRef.append(\"g\").attr(\"transform\", \"translate(0,\" + effective_height + \")\").call(d3.axisBottom(xAxis)).call(g => g.append(\"text\").style(\"font-size\", \"18px\").attr(\"x\", effective_width / 2).attr(\"y\", -margin_top + 80).attr(\"fill\", \"blue\").attr(\"text-anchor\", \"start\").text(\"PC 1\"));\n      a = bi['eigen_vectors']['PC 2'];\n      mmax = d3.max(Object.keys(a), function (d, i) {\n        return 1;\n      });\n      var yAxis = d3.scaleLinear().domain([-mmax, mmax]).range([effective_height, 0]);\n      accessToRef.append(\"g\").call(d3.axisLeft(yAxis)).call(g => g.append(\"text\").style(\"font-size\", \"18px\").attr(\"x\", -effective_height / 2 + 100).attr(\"y\", -margin_left + 20).attr(\"fill\", \"red\").attr(\"text-anchor\", \"end\").attr(\"transform\", \"rotate(-90)\").text(\"PC 2\"));\n      let pc1 = bi['eigen_vectors'][\"PC 1\"];\n      let pc2 = bi['eigen_vectors'][\"PC 2\"];\n      accessToRef.append('g').selectAll(\"dot\").data(Object.keys(bi['eigen_vectors'][\"PC 1\"])).enter().append(\"circle\").attr(\"cx\", function (d, i) {\n        return xAxis(pc1[d]);\n      }).attr(\"cy\", function (d, i) {\n        return yAxis(pc2[d]);\n      }).attr(\"r\", 3).style(\"fill\", \"green\");\n      let point_coordinate = 0.38;\n      pc1 = bi['feature_coordinates'][\"PC 1\"];\n      pc2 = bi['feature_coordinates'][\"PC 2\"];\n      let node = accessToRef.append('g');\n      node.selectAll('.line').data(Object.keys(bi[\"feature_coordinates\"][\"PC 1\"])).enter().append('line').style(\"stroke\", \"black\").style(\"stroke-width\", 1).attr(\"x1\", function (d, i) {\n        return xAxis(-point_coordinate);\n      }).attr(\"y1\", function (d, i) {\n        return yAxis(pc2[d] / pc1[d] * -point_coordinate);\n      }).attr(\"x2\", function (d, i) {\n        return xAxis(point_coordinate);\n      }).attr(\"y2\", function (d, i) {\n        return yAxis(pc2[d] / pc1[d] * point_coordinate);\n      });\n      node.selectAll('text').data(Object.keys(bi[\"feature_coordinates\"][\"PC 1\"])).enter().append(\"text\").attr(\"x\", function (d, i) {\n        return xAxis(point_coordinate);\n      }).attr(\"y\", function (d, i) {\n        return yAxis(pc2[d] / pc1[d] * point_coordinate);\n      }).attr(\"dy\", \".35em\").style(\"font-size\", \"10px\").text(function (d) {\n        return d;\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: bi ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: /*#__PURE__*/_jsxDEV(\"u\", {\n          children: \"PCA-based Biplot\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 23\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n        ref: scatterRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 19\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 15\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 24\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 137,\n    columnNumber: 9\n  }, this);\n};\n\n_s(BiPlot, \"YEenTAkcbY+AqE+xhET2Gcdt+MU=\");\n\n_c = BiPlot;\nexport default BiPlot;\n\nvar _c;\n\n$RefreshReg$(_c, \"BiPlot\");","map":{"version":3,"sources":["/Users/deepika/Documents/Visualization_D3_React_JS/Lab2/frontend/visualization/src/components/BiPlot.js"],"names":["React","useEffect","useRef","useState","d3","axios","BiPlot","props","scatterRef","bi","setBiState","data","width","height","margin_left","margin_right","margin_top","margin_bottom","effective_width","effective_height","xVariable","chartVariableX","yVariable","chartVariableY","isXNumeric","isYNumeric","get","then","repos","allRepos","vectors","JSON","parse","loadings","obj","clearBoard","draw","accessToRef","select","current","selectAll","remove","undefined","xdataGrouped","ydataGrouped","attr","style","append","a","b","mmax","max","Object","keys","d","i","xAxis","scaleLinear","domain","range","call","axisBottom","g","text","yAxis","axisLeft","pc1","pc2","enter","point_coordinate","node"],"mappings":"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","sourcesContent":["import React,{useEffect,useRef,useState} from 'react';\nimport * as d3 from 'd3';\nimport '../css/ScatterPlot.css';\nimport axios from 'axios';\n\n const BiPlot = (props) => {\n\n    let scatterRef = useRef(null);\n    const [bi, setBiState] = useState();\n    let data= props.data;\n    let width = 1000;\n    let height = 500;\n    const margin_left=100;\n    const margin_right=10;\n    const margin_top=20;\n    const margin_bottom=70;\n    const effective_width= width - margin_left - margin_right;\n    const effective_height= height - margin_top - margin_bottom;\n    const xVariable = props.chartVariableX;\n    const yVariable = props.chartVariableY;\n    const isXNumeric = props.isXNumeric;\n    const isYNumeric = props.isYNumeric;\n\n    useEffect(()=>{\n        axios.get('http://localhost:5000/bi_plot').then((repos) => {\n            const allRepos = repos.data;\n            let  vectors = JSON.parse(allRepos['eigen_vectors'][0]);\n            let loadings = JSON.parse(allRepos['feature_coordinates'][0]);\n            let obj={\n                'eigen_vectors':vectors,\n                'feature_coordinates':loadings\n            };\n            setBiState(obj);\n            clearBoard();\n            draw();\n          });\n\n    },[props]);\n\n    useEffect(()=>{\n        clearBoard();\n        draw();\n    },[bi])\n\n    const clearBoard=()=>{\n        const accessToRef = d3.select(scatterRef.current)\n        accessToRef.selectAll(\"svg > *\").remove();\n    }\n\n    const draw =() =>{\n    if(bi!=undefined)\n    {\n        let xdataGrouped,ydataGrouped;\n\n        const accessToRef = d3.select(scatterRef.current)\n                                .attr(\"height\",height)\n                                .attr(\"width\",width)\n                                .style(\"background-color\",\"#f5f5f5\")\n                                .append(\"g\")\n                                    .attr(\"transform\", \"translate(\" + margin_left + \",\" + margin_top + \")\");\n\n        let a=bi['eigen_vectors']['PC 1'];\n        let b=[2.111111,2.13223434,2.174354353];\n        let mmax = d3.max(Object.keys(a), function(d,i) { return 1 })\n        var xAxis = d3.scaleLinear()\n                    .domain([-mmax, d3.max(Object.keys(a), function(d,i) { return 1 })])\n                    .range([ 0, effective_width ]);\n\n        accessToRef.append(\"g\")\n                   .attr(\"transform\", \"translate(0,\" + effective_height + \")\")\n                   .call(d3.axisBottom(xAxis))\n                   .call(g => g.append(\"text\")\n                    .style(\"font-size\", \"18px\")\n                    .attr(\"x\", effective_width/2)\n                    .attr(\"y\", -margin_top+80)\n                    .attr(\"fill\", \"blue\")\n                    .attr(\"text-anchor\", \"start\")\n                    .text(\"PC 1\"));\n\n        a = bi['eigen_vectors']['PC 2'];\n        mmax= d3.max(Object.keys(a), function(d,i) { return 1 });\n        var yAxis = d3.scaleLinear()\n                  .domain([-mmax,mmax ])\n                  .range([ effective_height, 0]);\n\n        accessToRef.append(\"g\")\n            .call(d3.axisLeft(yAxis))\n            .call(g => g.append(\"text\")\n                .style(\"font-size\", \"18px\")\n                .attr(\"x\", -effective_height/2+100)\n                .attr(\"y\", -margin_left+20)\n                .attr(\"fill\", \"red\")\n                .attr(\"text-anchor\", \"end\")\n                .attr(\"transform\", \"rotate(-90)\")\n                .text(\"PC 2\"));\n        \n        let pc1 = bi['eigen_vectors'][\"PC 1\"];\n        let pc2 = bi['eigen_vectors'][\"PC 2\"];\n        accessToRef.append('g')\n            .selectAll(\"dot\")\n            .data(Object.keys(bi['eigen_vectors'][\"PC 1\"]))\n            .enter()\n                .append(\"circle\")\n                .attr(\"cx\", function (d,i) { return xAxis(pc1[d])})\n                .attr(\"cy\", function (d,i) { return yAxis(pc2[d])})\n                .attr(\"r\", 3)\n                .style(\"fill\", \"green\");\n\n        let point_coordinate=0.38;\n        pc1 = bi['feature_coordinates'][\"PC 1\"];\n        pc2 = bi['feature_coordinates'][\"PC 2\"];\n        let node= accessToRef.append('g');\n        node.selectAll('.line')\n            .data(Object.keys(bi[\"feature_coordinates\"][\"PC 1\"]))\n            .enter()\n            .append('line')\n                .style(\"stroke\", \"black\")\n                .style(\"stroke-width\", 1)\n                .attr(\"x1\", function(d,i) { return xAxis(-point_coordinate)})\n                .attr(\"y1\", function(d,i) { return yAxis((pc2[d]/pc1[d])*-point_coordinate)})\n                .attr(\"x2\", function(d,i) { return  xAxis(point_coordinate)})\n                .attr(\"y2\", function(d,i) { return yAxis((pc2[d]/pc1[d])*point_coordinate) });\n        \n        node.selectAll('text')\n            .data(Object.keys(bi[\"feature_coordinates\"][\"PC 1\"]))\n            .enter()\n            .append(\"text\")\n            .attr(\"x\", function(d,i) { return xAxis(point_coordinate) })\n            .attr(\"y\", function(d,i){ return yAxis((pc2[d]/pc1[d])*point_coordinate)})\n            .attr(\"dy\", \".35em\")\n            .style(\"font-size\", \"10px\")\n            .text(function(d) { return d; });\n        \n        }\n    }\n    return(\n        <div>\n            {\n              bi ? \n              <div>\n                  <h3><u>PCA-based Biplot</u></h3>\n                  <svg ref={scatterRef}></svg>\n              </div> : <div >Loading</div>\n            }\n        </div>\n    );  \n};\nexport default BiPlot;\n\n\n"]},"metadata":{},"sourceType":"module"}