{"ast":null,"code":"var _jsxFileName = \"/Users/deepika/Documents/Visualization_D3_React_JS/Lab2/frontend/visualization/src/components/ScreePlot.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport * as d3 from 'd3';\nimport d3tip from \"d3-tip\";\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ScreePlot = props => {\n  _s();\n\n  const colors = [\"blue\", \"green\", \"gold\", \"grey\", \"orange\", \"yellow\", \"pink\", \"cyan\", \"magenta\", \"brown\", \"black\", \"tomato\"];\n  const [scree, setScreeState] = useState();\n  const [dim, setDimState] = useState();\n  const chartRef = useRef(null);\n  let data = props.data;\n  const width = 1000;\n  const height = 500;\n  const margin_left = 100;\n  const margin_right = 30;\n  const margin_top = 20;\n  const margin_bottom = 100;\n  const effective_width = width - margin_left - margin_right;\n  const effective_height = height - margin_top - margin_bottom;\n  let chartVariable = props.chartVariable;\n  const tip = d3tip().attr('class', 'd3-tip animate').offset([-20, 0]).html(function (d) {\n    return '<strong><font color=\"red\">' + d + '</font></strong>';\n  });\n  useEffect(() => {\n    axios.get('http://localhost:8000/scree_plot').then(repos => {\n      const allRepos = repos.data;\n      setScreeState(allRepos);\n    });\n    clearBoard();\n    draw();\n  }, [props]);\n\n  const clearBoard = () => {\n    const accessToRef = d3.select(chartRef.current);\n    accessToRef.selectAll(\"svg > *\").remove();\n    d3.select(\".d3-tip\").remove();\n  };\n\n  const draw = () => {\n    if (scree != undefined) {\n      const accessToRef = d3.select(chartRef.current).attr(\"height\", height).attr(\"width\", width).style(\"background-color\", \"#f5f5f5\").append(\"g\").attr(\"transform\", \"translate(\" + margin_left + \",\" + margin_top + \")\");\n      var xAxis = d3.scaleBand().domain(scree['variance'].map(function (d, i) {\n        return \"PC \" + (i + 1);\n      })).range([0, effective_width]).paddingInner(0.1).paddingOuter(0.1);\n      accessToRef.append(\"g\").attr(\"transform\", \"translate(0,\" + effective_height + \")\").call(d3.axisBottom(xAxis)).call(g => g.append(\"text\").style(\"font-size\", \"18px\").attr(\"x\", effective_width / 2).attr(\"y\", -margin_top + 80).attr(\"fill\", \"currentColor\").attr(\"text-anchor\", \"start\").text(\"Principal Components\"));\n      var yAxis = d3.scaleLinear().range([effective_height, 0]).domain([0, 1]); //d3.max(scree['variance'],function(d) { return 1.2*d; })]); \n\n      accessToRef.append(\"g\") //.attr(\"transform\", \"translate(0\"+\",\"+margin_bottom+\")\")\n      .call(d3.axisLeft(yAxis)).call(g => g.append(\"text\").style(\"font-size\", \"18px\").attr(\"x\", -effective_height / 2).attr(\"y\", -margin_left + 20).attr(\"fill\", \"currentColor\").attr(\"text-anchor\", \"end\").attr(\"transform\", \"rotate(-90)\").text(\"Explained Variance\"));\n      let barWidth = xAxis.bandwidth();\n      accessToRef.selectAll(\"rect\").data(scree['variance']).enter().append(\"rect\").attr(\"x\", (d, i) => {\n        return xAxis(\"PC \" + (i + 1));\n      }).attr(\"y\", (d, i) => {\n        return yAxis(d);\n      }).attr(\"width\", barWidth).attr(\"height\", (d, i) => {\n        return effective_height - yAxis(d);\n      }).style(\"fill\", (d, i) => \"blue\").on('mouseover', function (d, i) {\n        tip.show(d, this);\n        d3.select(this).transition().duration('50').style(\"fill\", \"red\");\n      }).on('mouseout', function (d, i) {\n        d3.select(this).transition().duration('50').style(\"fill\", \"blue\");\n        tip.hide();\n      }).on(\"click\", function (d, i) {\n        setDimState(i);\n        d3.event.stopPropagation();\n        props.changeDim(i + 1);\n      });\n      accessToRef.append(\"path\").datum(scree[\"variance_cumulative\"]).attr(\"fill\", \"none\").attr(\"stroke\", \"steelblue\").attr(\"stroke-width\", 1.5).attr(\"d\", d3.line().x(function (d, i) {\n        return xAxis(\"PC \" + (i + 1)) + xAxis.bandwidth() / 2;\n      }).y(function (d) {\n        return yAxis(d);\n      }));\n      accessToRef.selectAll(\"myCircles\").data(scree[\"variance_cumulative\"]).enter().append(\"circle\").attr(\"fill\", \"red\").attr(\"stroke\", \"none\").attr(\"cx\", function (d, i) {\n        return xAxis(\"PC \" + (i + 1)) + xAxis.bandwidth() / 2;\n      }).attr(\"cy\", function (d) {\n        return yAxis(d);\n      }).attr(\"r\", 3).on('mouseover', function (d, i) {\n        tip.show(d, this);\n      }).on('mouseout', function (d, i) {\n        tip.hide();\n      });\n      accessToRef.call(tip);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: /*#__PURE__*/_jsxDEV(\"u\", {\n        children: \"Scree Plot\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Dimensionality index is : \", dim + 1 ? dim + 1 : \" Select Dimensionality Index\", \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }, this), scree ? /*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: chartRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 22\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 50\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 148,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ScreePlot, \"YihLTy/yaZ60P5Mr2mRIhmlgp+0=\");\n\n_c = ScreePlot;\nexport default ScreePlot;\n\nvar _c;\n\n$RefreshReg$(_c, \"ScreePlot\");","map":{"version":3,"sources":["/Users/deepika/Documents/Visualization_D3_React_JS/Lab2/frontend/visualization/src/components/ScreePlot.js"],"names":["React","useEffect","useRef","useState","d3","d3tip","axios","ScreePlot","props","colors","scree","setScreeState","dim","setDimState","chartRef","data","width","height","margin_left","margin_right","margin_top","margin_bottom","effective_width","effective_height","chartVariable","tip","attr","offset","html","d","get","then","repos","allRepos","clearBoard","draw","accessToRef","select","current","selectAll","remove","undefined","style","append","xAxis","scaleBand","domain","map","i","range","paddingInner","paddingOuter","call","axisBottom","g","text","yAxis","scaleLinear","axisLeft","barWidth","bandwidth","enter","on","show","transition","duration","hide","event","stopPropagation","changeDim","datum","line","x","y"],"mappings":"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","sourcesContent":["import React,{useEffect,useRef,useState} from 'react';\nimport * as d3 from 'd3';\nimport d3tip from \"d3-tip\";\nimport axios from 'axios';\n\n const ScreePlot=(props)=>{\n\n    const colors=[\"blue\",\"green\",\"gold\",\"grey\",\"orange\",\"yellow\",\"pink\",\"cyan\",\"magenta\",\"brown\",\"black\",\"tomato\"];\n    const [scree, setScreeState] = useState();\n    const [dim, setDimState] = useState();\n    const chartRef = useRef(null);\n    let data= props.data;\n    const width = 1000;\n    const height = 500;\n    const margin_left=100;\n    const margin_right=30;\n    const margin_top=20;\n    const margin_bottom=100;\n    const effective_width= width - margin_left - margin_right;\n    const effective_height= height - margin_top - margin_bottom;\n    let chartVariable= props.chartVariable;\n\n    const tip = d3tip()\n    .attr('class', 'd3-tip animate')\n    .offset([-20, 0])\n    .html(function(d) {\n        return '<strong><font color=\"red\">'+ d+'</font></strong>';\n      });\n\n    useEffect(()=>{\n\n        axios.get('http://localhost:8000/scree_plot').then((repos) => {\n            const allRepos = repos.data;\n            setScreeState(allRepos);\n          });\n\n        clearBoard();\n        draw();\n    },[props]);\n\n    const clearBoard = ()=>{\n        const accessToRef = d3.select(chartRef.current)\n        accessToRef.selectAll(\"svg > *\").remove();\n        d3.select(\".d3-tip\").remove();\n    }\n\n    const draw=()=>{\n    if(scree!=undefined)\n    {\n        const accessToRef = d3.select(chartRef.current)\n        .attr(\"height\",height)\n        .attr(\"width\",width)\n        .style(\"background-color\",\"#f5f5f5\")\n        .append(\"g\")\n            .attr(\"transform\",\"translate(\"+margin_left+\",\"+margin_top+\")\"); \n\n        var xAxis = d3.scaleBand()\n                    .domain(scree['variance'].map(function(d,i) { return \"PC \"+ (i+1); }))\n                    .range([0, effective_width])\n                    .paddingInner(0.1)\n                    .paddingOuter(0.1);\n\n        accessToRef.append(\"g\")\n            .attr(\"transform\", \"translate(0,\" + effective_height + \")\")\n            .call(d3.axisBottom(xAxis))\n            .call(g => g.append(\"text\")\n                .style(\"font-size\", \"18px\")\n                .attr(\"x\", effective_width/2)\n                .attr(\"y\", -margin_top+80)\n                .attr(\"fill\", \"currentColor\")\n                .attr(\"text-anchor\", \"start\")\n                .text(\"Principal Components\"));\n\n        var yAxis = d3.scaleLinear()\n            .range([effective_height, 0])\n            .domain([0, 1]);//d3.max(scree['variance'],function(d) { return 1.2*d; })]); \n  \n        accessToRef.append(\"g\")\n            //.attr(\"transform\", \"translate(0\"+\",\"+margin_bottom+\")\")\n            .call(d3.axisLeft(yAxis))\n            .call(g => g.append(\"text\")\n                .style(\"font-size\", \"18px\")\n                .attr(\"x\", -effective_height/2)\n                .attr(\"y\", -margin_left+20)\n                .attr(\"fill\", \"currentColor\")\n                .attr(\"text-anchor\", \"end\")\n                .attr(\"transform\", \"rotate(-90)\")\n                .text(\"Explained Variance\"));\n\n        let barWidth= xAxis.bandwidth();\n        accessToRef.selectAll(\"rect\")\n            .data(scree['variance'])\n            .enter()\n            .append(\"rect\")\n                .attr(\"x\",(d,i) => {return xAxis(\"PC \"+ (i+1))}) \n                .attr(\"y\",(d,i) => { return  yAxis(d)})\n                .attr(\"width\", barWidth)\n                .attr(\"height\",(d,i)=> {return effective_height - yAxis(d)})\n                .style(\"fill\",(d,i)=> \"blue\")\n                .on('mouseover', function (d, i) {\n                    tip.show(d,this);\n                    d3.select(this)\n                         .transition()\n                         .duration('50')\n                         .style(\"fill\",\"red\");\n                })\n                .on('mouseout', function (d, i) {\n                    d3.select(this).transition()\n                         .duration('50')\n                         .style(\"fill\",\"blue\");\n                    tip.hide();\n                })\n                .on(\"click\", function(d,i) {\n                    setDimState(i);\n                    d3.event.stopPropagation();\n                    props.changeDim(i+1);\n                  });\n\n        accessToRef.append(\"path\")\n                .datum(scree[\"variance_cumulative\"])\n                .attr(\"fill\", \"none\")\n                .attr(\"stroke\", \"steelblue\")\n                .attr(\"stroke-width\", 1.5)\n                .attr(\"d\", d3.line()\n                  .x(function(d,i) { return xAxis(\"PC \"+ (i+1))+ xAxis.bandwidth()/2})\n                  .y(function(d) { return yAxis(d) })\n                  );\n        accessToRef.selectAll(\"myCircles\")\n                  .data(scree[\"variance_cumulative\"])\n                  .enter()\n                  .append(\"circle\")\n                    .attr(\"fill\", \"red\")\n                    .attr(\"stroke\", \"none\")\n                    .attr(\"cx\", function(d,i) { return xAxis(\"PC \"+ (i+1)) + xAxis.bandwidth()/2 })\n                    .attr(\"cy\", function(d) { return yAxis(d) })\n                    .attr(\"r\", 3)\n                  .on('mouseover', function (d, i) {\n                        tip.show(d,this);\n                    })\n                    .on('mouseout', function (d, i) {\n                        tip.hide();\n                    });\n        accessToRef.call(tip);\n    }\n}\n\n    return(\n        <div>\n            <h3><u>Scree Plot</u></h3>\n            <div>Dimensionality index is : {dim+1 ? dim+1:\" Select Dimensionality Index\"} </div>\n            {scree ? <svg ref={chartRef}></svg> :<div/>}\n        </div>\n    );\n};\n\nexport default ScreePlot;\n"]},"metadata":{},"sourceType":"module"}