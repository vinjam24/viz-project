{"ast":null,"code":"var _jsxFileName = \"/Users/deepika/Documents/Visualization_D3_React_JS/Lab2/frontend/visualization/src/components/ScatterPlotMatrix.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport * as d3 from 'd3';\nimport '../css/ScatterPlot.css';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ScatterPlotMatrix = props => {\n  _s();\n\n  const [table, setTableState] = useState();\n  const [scatter, setScatterState] = useState();\n  let scatterRef = useRef(null);\n  let data = props.data;\n  let width = 1000;\n  let height = 500;\n  const features = [];\n  const colormap = [\"red\", \"blue\", \"green\", \"gold\"];\n  useEffect(() => {\n    axios.get('http://localhost:5000/loading/' + (props.dimensionality ? props.dimensionality : 4)).then(repos => {\n      const allRepos = repos.data;\n      let data = JSON.parse(allRepos);\n      let str = '<table style=\"border: 1px solid black\">';\n      let pc = [];\n      let features = [];\n      Object.keys(data).map(function (name, index) {\n        pc[index] = name;\n      });\n      Object.keys(data).map(function (name, index) {\n        Object.keys(data[name]).map(function (name1, index) {\n          features[index] = name1;\n        });\n      });\n      str += '<tr><th>Features</th>';\n\n      for (let j = 0; j < pc.length; j++) {\n        str += '<th>' + pc[j] + '</th>';\n      }\n\n      str += '</tr>';\n\n      for (let i = 0; i < 4; i++) {\n        str += '<tr><td><b>' + features[i] + '</b></td>';\n\n        for (let j = 0; j < pc.length; j++) {\n          str += '<td>' + data[pc[j]][features[i]] + '</td>';\n        }\n\n        str += '</tr>';\n      }\n\n      str += '</table>';\n      setTableState(str);\n    });\n    axios.get('http://localhost:5000/scatterplotmatrix').then(repos => {\n      const allRepos = repos.data;\n      let data = JSON.parse(allRepos);\n      let temp = data;\n      setScatterState(data);\n      Object.keys(data).map(function (key, index) {\n        features[index] = key;\n      });\n      clearBoard();\n      draw();\n    }).catch(error => {\n      console.error(\"error\", error);\n    });\n  }, [props]);\n  useEffect(() => {\n    clearBoard();\n    draw();\n  }, [scatter]);\n\n  const clearBoard = () => {\n    const accessToRef = d3.select(scatterRef.current);\n    accessToRef.selectAll(\"svg > *\").remove();\n  };\n\n  const calculateCellData = (a, b) => {\n    var c = [],\n        n = a.length,\n        m = b.length,\n        i,\n        j;\n\n    for (i = -1; ++i < n;) for (j = -1; ++j < m;) c.push({\n      x: a[i],\n      i: i,\n      y: b[j],\n      j: j\n    });\n\n    return c;\n  };\n\n  const draw = () => {\n    if (scatter != undefined) {\n      var response = scatter;\n      let names = [];\n      Object.keys(response).map(function (name, index) {\n        names[index] = name;\n      });\n      let cols = names.slice(0, -1);\n      var pcNames = new Object(cols);\n      var width = 1000,\n          size = 250,\n          padding = 20;\n      var x = d3.scaleLinear().range([padding / 2, size - padding / 2]);\n      var y = d3.scaleLinear().range([size - padding / 2, padding / 2]);\n      var xAxis = d3.axisBottom(x).tickFormat(function (d) {\n        return d;\n      });\n      var yAxis = d3.axisLeft(y).tickFormat(function (d) {\n        return d;\n      });\n      var color = d3.scaleOrdinal(d3.schemeCategory10);\n      data = {};\n\n      for (let i = 0; i < 5; i++) data[names[i]] = response[names[i]];\n\n      var domainByFtr = {},\n          n = pcNames.length;\n      xAxis.tickSize(size * n);\n      yAxis.tickSize(-size * n);\n      pcNames.forEach(function (pcName) {\n        domainByFtr[pcName] = d3.extent(d3.values(data[pcName]));\n      });\n      const svg = d3.select(scatterRef.current).attr('id', 'chart').attr(\"width\", size * n + padding).attr(\"height\", size * n + padding).append(\"g\").attr(\"transform\", \"translate(\" + padding + \",\" + padding / 2 + \")\");\n      svg.selectAll(\".x.axis\").data(pcNames).enter().append(\"g\").attr(\"class\", \"x axis\").attr(\"transform\", function (d, i) {\n        return \"translate(\" + (n - i - 1) * size + \",0)\";\n      }).each(function (d) {\n        x.domain(domainByFtr[d]);\n        d3.select(this).call(xAxis);\n      });\n      svg.selectAll(\".y.axis\").data(pcNames).enter().append(\"g\").attr(\"class\", \"y axis\").attr(\"transform\", function (d, i) {\n        return \"translate(0,\" + i * size + \")\";\n      }).each(function (d) {\n        y.domain(domainByFtr[d]);\n        d3.select(this).call(yAxis);\n      });\n      svg.append(\"text\").attr(\"x\", width / 2).attr(\"y\", 0 + 5).attr(\"text-anchor\", \"middle\").style(\"font-size\", \"16px\").style(\"text-decoration\", \"underline\").style(\"font-weight\", \"bold\").text(\"ScatterPlot Matrix\");\n      var cell = svg.selectAll(\".cell\").data(calculateCellData(pcNames, pcNames)).enter().append(\"g\").attr(\"class\", function (d) {\n        return \"cell\" + (n - d.i - 1) + d.j;\n      }).attr(\"transform\", function (d) {\n        return \"translate(\" + (n - d.i - 1) * size + \",\" + d.j * size + \")\";\n      });\n      let ps = calculateCellData(pcNames, pcNames);\n\n      for (let i = 0; i < 16; i++) {\n        let p = ps[i];\n        x.domain(domainByFtr[String(p.x)]);\n        y.domain(domainByFtr[String(p.y)]);\n        d3.selectAll(\"g.cell\" + (n - p.i - 1) + p.j).append(\"rect\").attr(\"id\", \"frame\").attr(\"class\", \"rec\").attr(\"x\", padding / 2).attr(\"y\", padding / 2).attr(\"width\", size - padding).attr(\"height\", size - padding).style(\"fill\", \"#e7e7e7\").style(\"fill-opacity\", 0.7);\n        let first_comp = data[String(p.x)];\n        let second_comp = data[String(p.y)];\n        let result_array = [];\n        let second = d3.values(second_comp);\n        let label = d3.values(data[\"color\"]);\n        d3.values(first_comp).forEach(function (item, index) {\n          let temp_map = {};\n          temp_map[\"x\"] = item;\n          temp_map[\"y\"] = second[index];\n          temp_map[\"color\"] = label[index];\n          result_array.push(temp_map);\n        });\n        d3.selectAll(\"g.cell\" + (n - p.i - 1) + p.j).selectAll(\"circle\").data(result_array).enter().append(\"circle\").attr(\"cx\", function (d) {\n          return x(d.x);\n        }).attr(\"cy\", function (d) {\n          return y(d.y);\n        }).attr(\"r\", 3).style(\"fill\", function (d) {\n          return colormap[d.color];\n        });\n      }\n\n      cell.filter(function (d) {\n        return d.i === d.j;\n      }).append(\"text\").attr(\"x\", size / 2 - padding - 30).attr(\"y\", size / 2 - padding).attr(\"dy\", \".65em\").style(\"font-weight\", \"bold\").style(\"font-size\", \"20px\").text(function (d) {\n        return d.x;\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 18\n    }, this), table ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content\",\n      dangerouslySetInnerHTML: {\n        __html: table\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 27\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 20\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 18\n    }, this), scatter ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n        ref: scatterRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 32\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 22\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"legend\",\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Color Legend\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 41\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 60\n        }, this), \"Red   -  Cluster 1\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 39\n        }, this), \"Blue  -  Cluster 2\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 39\n        }, this), \"Green -  Cluster 3\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 39\n        }, this), \"Gold  -  Cluster 4\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 39\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 27\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 26\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 199,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ScatterPlotMatrix, \"NLnkcJtux/rTZGua9s4xplA+22M=\");\n\n_c = ScatterPlotMatrix;\nexport default ScatterPlotMatrix;\n\nvar _c;\n\n$RefreshReg$(_c, \"ScatterPlotMatrix\");","map":{"version":3,"sources":["/Users/deepika/Documents/Visualization_D3_React_JS/Lab2/frontend/visualization/src/components/ScatterPlotMatrix.js"],"names":["React","useEffect","useRef","useState","d3","axios","ScatterPlotMatrix","props","table","setTableState","scatter","setScatterState","scatterRef","data","width","height","features","colormap","get","dimensionality","then","repos","allRepos","JSON","parse","str","pc","Object","keys","map","name","index","name1","j","length","i","temp","key","clearBoard","draw","catch","error","console","accessToRef","select","current","selectAll","remove","calculateCellData","a","b","c","n","m","push","x","y","undefined","response","names","cols","slice","pcNames","size","padding","scaleLinear","range","xAxis","axisBottom","tickFormat","d","yAxis","axisLeft","color","scaleOrdinal","schemeCategory10","domainByFtr","tickSize","forEach","pcName","extent","values","svg","attr","append","enter","each","domain","call","style","text","cell","ps","p","String","first_comp","second_comp","result_array","second","label","item","temp_map","filter","__html"],"mappings":"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","sourcesContent":["import React,{useEffect,useRef,useState} from 'react';\nimport * as d3 from 'd3';\nimport '../css/ScatterPlot.css';\nimport axios from 'axios';\n\n const ScatterPlotMatrix = (props) => {\n\n    const [table, setTableState] = useState();\n    const [scatter, setScatterState] = useState();\n    let scatterRef = useRef(null);\n    let data= props.data;\n    let width = 1000;\n    let height = 500;\n    const features=[];\n    const colormap=[\"red\",\"blue\",\"green\",\"gold\"];\n\n    useEffect(()=>{\n        \n        axios.get('http://localhost:5000/loading/'+(props.dimensionality?props.dimensionality:4)).then((repos) => {\n            const allRepos = repos.data;\n            let data= JSON.parse(allRepos);\n            let str='<table style=\"border: 1px solid black\">';\n            let pc=[];\n            let features=[];\n            Object.keys(data).map(function(name, index){\n                pc[index]=name\n            });\n            Object.keys(data).map(function(name, index){\n                Object.keys(data[name]).map(function(name1,index){\n                            features[index]=name1;\n                })\n            });\n            str+='<tr><th>Features</th>';\n            for(let j=0;j<pc.length;j++)\n            {\n                str+='<th>'+pc[j]+'</th>';\n            }\n            str+='</tr>';\n            for(let i=0;i<4;i++)\n            {\n                str+='<tr><td><b>'+features[i]+'</b></td>';\n                for(let j=0;j<pc.length;j++)\n                {\n                    str+='<td>'+data[pc[j]][features[i]]+'</td>';\n                }\n                str+='</tr>';\n            }\n            str+='</table>';\n            setTableState(str);\n          });\n\n        axios.get('http://localhost:5000/scatterplotmatrix').then((repos) => {\n            const allRepos = repos.data;\n            let data= JSON.parse(allRepos);\n            let temp=data;\n            setScatterState(data);\n            Object.keys(data).map(function(key,index){\n                features[index]=key;\n            })\n            \n            clearBoard();\n            draw();\n        })\n        .catch((error) => {\n            console.error(\"error\",error);\n        });\n    },[props]);\n\n    useEffect(()=>{\n        clearBoard();\n        draw();\n    },[scatter]);\n\n    const clearBoard=()=>{\n        const accessToRef = d3.select(scatterRef.current)\n        accessToRef.selectAll(\"svg > *\").remove();\n    }\n\n    const calculateCellData=(a, b)=>{\n        var c = [], n = a.length, m = b.length, i, j;\n        for (i = -1; ++i < n;) for (j = -1; ++j < m;) c.push({x: a[i], i: i, y: b[j], j: j});\n        return c;\n    }\n\n    const draw =() =>{\n        if(scatter!=undefined)\n        {\n        var response = scatter;\n        let names=[];\n        Object.keys(response).map(function(name,index){\n            names[index]=name;\n        });\n        let cols = names.slice(0, -1);\n        var pcNames = new Object(cols);\n        var width = 1000,\n        size = 250,\n        padding = 20;\n        var x = d3.scaleLinear()\n                .range([padding/2, size - padding/2]);\n        var y = d3.scaleLinear()\n                .range([size - padding/2, padding/2]);\n        var xAxis = d3.axisBottom(x).tickFormat(function(d){ return d;});\n        var yAxis = d3.axisLeft(y).tickFormat(function(d){ return d;});\n        var color = d3.scaleOrdinal(d3.schemeCategory10);\n        data = {};\n        for(let i=0;i<5;i++)\n            data[names[i]]= response[names[i]];\n        var domainByFtr = {},\n        n = pcNames.length;\n        xAxis.tickSize(size * n);\n        yAxis.tickSize(-size * n);\n        pcNames.forEach(function(pcName) {\n            domainByFtr[pcName] = d3.extent(d3.values(data[pcName]));\n        });\n\n        const svg = d3.select(scatterRef.current)\n                        .attr('id', 'chart')\n                        .attr(\"width\", size * n + padding)\n                        .attr(\"height\", size * n + padding)\n                        .append(\"g\")\n                        .attr(\"transform\", \"translate(\" + padding + \",\" + padding / 2 + \")\");\n\n        svg.selectAll(\".x.axis\")\n            .data(pcNames)\n            .enter().append(\"g\")\n            .attr(\"class\", \"x axis\")\n            .attr(\"transform\", function(d, i) { return \"translate(\" + (n - i - 1) * size + \",0)\"; })\n            .each(function(d) { x.domain(domainByFtr[d]); d3.select(this).call(xAxis); });\n\n        svg.selectAll(\".y.axis\")\n            .data(pcNames)\n            .enter().append(\"g\")\n            .attr(\"class\", \"y axis\")\n            .attr(\"transform\", function(d, i) { return \"translate(0,\" + i * size + \")\"; })\n            .each(function(d) { y.domain(domainByFtr[d]); d3.select(this).call(yAxis); });\n\n        svg.append(\"text\")\n            .attr(\"x\", (width / 2))\n            .attr(\"y\", 0 + (5))\n            .attr(\"text-anchor\", \"middle\")\n            .style(\"font-size\", \"16px\")\n            .style(\"text-decoration\", \"underline\")\n            .style(\"font-weight\", \"bold\")\n            .text(\"ScatterPlot Matrix\");\n\n        var cell = svg.selectAll(\".cell\")\n            .data(calculateCellData(pcNames, pcNames))\n            .enter().append(\"g\")\n            .attr(\"class\", function(d) {return \"cell\"+(n - d.i - 1)+d.j;})\n            .attr(\"transform\", function(d) { return \"translate(\" + (n - d.i - 1) * size + \",\" + d.j * size + \")\"; })\n            ;\n\n        let ps= calculateCellData(pcNames,pcNames);\n        for(let i=0;i<16;i++){\n            let p=ps[i];\n            x.domain(domainByFtr[String(p.x)]);\n            y.domain(domainByFtr[String(p.y)]);\n            d3.selectAll(\"g.cell\"+(n - p.i - 1)+p.j).append(\"rect\")\n                .attr(\"id\", \"frame\")\n                .attr(\"class\",\"rec\")\n                .attr(\"x\", padding / 2)\n                .attr(\"y\", padding / 2)\n                .attr(\"width\", size - padding)\n                .attr(\"height\", size - padding)\n                .style(\"fill\",\"#e7e7e7\")\n                .style(\"fill-opacity\",0.7);\n            let first_comp = data[String(p.x)];\n            let second_comp = data[String(p.y)];\n            let result_array = []\n            let second = d3.values(second_comp)\n            let label = d3.values(data[\"color\"]);\n            d3.values(first_comp).forEach(function(item, index) {\n                let temp_map = {};\n                temp_map[\"x\"] = item;\n                temp_map[\"y\"] = second[index];\n                temp_map[\"color\"] = label[index];\n                result_array.push(temp_map);\n            });\n            d3.selectAll(\"g.cell\"+(n - p.i - 1)+p.j).selectAll(\"circle\")\n                    .data(result_array)\n                    .enter().append(\"circle\")\n                    .attr(\"cx\", function(d) { return x(d.x); })\n                    .attr(\"cy\", function(d) { return y(d.y); })\n                    .attr(\"r\", 3)\n                    .style(\"fill\", function(d) { return  colormap[d.color]});\n        }\n\n        cell.filter(function(d) { return d.i === d.j; }).append(\"text\")\n            .attr(\"x\", size/2-padding-30)\n            .attr(\"y\", size/2-padding)\n            .attr(\"dy\", \".65em\")\n            .style(\"font-weight\", \"bold\")\n            .style(\"font-size\", \"20px\")\n            .text(function(d) { return d.x; });\n    }\n}\n\n    return(\n        <div>\n            <br/><br/>\n            { \n                table ?   <div className=\"content\" dangerouslySetInnerHTML={{__html: table}}></div>\n                 : <div />  \n            }\n            <br/><br/>\n            {\n                scatter ? <div><svg ref={scatterRef}></svg>\n                <br/><br/><br/>\n                <div className=\"legend\"><b>Color Legend</b><br/>\n                    Red   -  Cluster 1<br/>\n                    Blue  -  Cluster 2<br/>\n                    Green -  Cluster 3<br/>\n                    Gold  -  Cluster 4<br/>\n                </div>\n                <br/>\n                </div> : <div />\n                \n            }\n            </div>\n    );\n\n};\nexport default ScatterPlotMatrix;\n\n\n"]},"metadata":{},"sourceType":"module"}